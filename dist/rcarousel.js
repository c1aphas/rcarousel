!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("react"),require("classnames"),require("core-decorators"),require("lodash"));else if("function"==typeof define&&define.amd)define(["react","classnames","core-decorators","lodash"],e);else{var i="object"==typeof exports?e(require("react"),require("classnames"),require("core-decorators"),require("lodash")):e(t.react,t.classnames,t["core-decorators"],t.lodash);for(var n in i)("object"==typeof exports?exports:t)[n]=i[n]}}(this,function(t,e,i,n){return function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=5)}([function(e,i){e.exports=t},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();e.default=function(t){return function(e){function i(){var t,e,o,s;n(this,i);for(var a=arguments.length,l=Array(a),c=0;c<a;c++)l[c]=arguments[c];return e=o=r(this,(t=i.__proto__||Object.getPrototypeOf(i)).call.apply(t,[this].concat(l))),o.initialX=0,o.initialY=0,o.delta={x:0,y:0},o.prevDelta={x:0,y:0},o.direction=-1,o.initialized=!1,o.shouldBlockScrollY=!1,o.shouldBlockScrollX=!1,s=e,r(o,s)}return o(i,e),s(i,[{key:"getDirection",value:function(t){var e=Math.abs(t.x-this.prevDelta.x),i=Math.abs(t.y-this.prevDelta.y),n=e>i;this.direction=n?t.x>this.prevDelta.x?c:u:t.y>this.prevDelta.y?h:p}},{key:"init",value:function(t){t&&!this.initialized&&(this.initialized=!0,this.wci=t,document.addEventListener("scroll",this.handleScroll.bind(this),!1),this.wci.innerNode.addEventListener("touchstart",this.handleTouchStart.bind(this),!1),this.wci.innerNode.addEventListener("touchmove",this.handleTouchMove.bind(this),!1),this.wci.innerNode.addEventListener("touchend",this.handleTouchEnd.bind(this),!1))}},{key:"handleTouchStart",value:function(t){this.shouldBlockScrollX=!1,this.shouldBlockScrollY=!1,this.wci.props.stopPropagation&&t.stopPropagation(),this.initialX=t.touches[0].clientX,this.initialY=t.touches[0].clientY,this.wci.swipeStart&&this.wci.swipeStart(t)}},{key:"setDelta",value:function(t){this.prevDelta=Object.assign({},this.delta),this.delta=t}},{key:"handleScroll",value:function(){this.shouldBlockScrollY||(this.shouldBlockScrollX=!0)}},{key:"handleTouchMove",value:function(t){this.wci.props.stopPropagation&&t.stopPropagation();var e={x:this.initialX-t.touches[0].clientX,y:this.initialY-t.touches[0].clientY};switch(this.getDirection(e),this.direction){case c:this.shouldBlockScrollX||(this.shouldBlockScrollY=!0,this.setDelta(e),this.wci.swipingLeft&&this.wci.swipingLeft(t,this.delta));break;case u:this.shouldBlockScrollX||(this.shouldBlockScrollY=!0,this.setDelta(e),this.wci.swipingRight&&this.wci.swipingRight(t,this.delta));break;case h:this.setDelta(e),this.shouldBlockScrollY||(this.shouldBlockScrollX=!0),this.wci.swipingUp&&this.wci.swipingUp(t,this.delta);break;case p:this.setDelta(e),this.shouldBlockScrollY||(this.shouldBlockScrollX=!0),this.wci.swipingDown&&this.wci.swipingDown(t,this.delta)}this.wci.swiping&&this.wci.swiping(t,this.delta),this.shouldBlockScrollY&&t.preventDefault()}},{key:"handleTouchEnd",value:function(t){this.wci.props.stopPropagation&&t.stopPropagation(),t.cancelable&&t.preventDefault(),this.wci.swiped&&this.wci.swiped(t,this.delta),this.direction===c?this.wci.swipedLeft&&this.wci.swipedLeft(t,this.delta):this.direction===u&&this.wci.swipedRight&&this.wci.swipedRight(t,this.delta),this.shouldBlockScrollX=!1,this.shouldBlockScrollY=!1,this.prevDelta={x:0,y:0}}},{key:"render",value:function(){var e=Object.assign({},this.props,{ref:this.init.bind(this)});return l.default.createElement(t,e)}}]),i}(a.Component)};var a=i(0),l=function(t){return t&&t.__esModule?t:{default:t}}(a),c=0,u=1,h=2,p=3},function(t,i){t.exports=e},function(t,e){t.exports=i},function(t,e){t.exports=n},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,i){function n(r,o){try{var s=e[r](o),a=s.value}catch(t){return void i(t)}if(!s.done)return Promise.resolve(a).then(function(t){n("next",t)},function(t){n("throw",t)});t(a)}return n("next")})}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t,e,i,n,r){var o={};return Object.keys(n).forEach(function(t){o[t]=n[t]}),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=i.slice().reverse().reduce(function(i,n){return n(t,e,i)||i},o),r&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(r):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}Object.defineProperty(e,"__esModule",{value:!0});var u,h,p=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},d=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),f=i(0),y=n(f),v=i(2),g=n(v),m=i(4),b=n(m),w=i(3),k=i(1),x=n(k),P=(0,x.default)((h=function(t){function e(t){s(this,e);var i=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.currentDelta=0,i.widthTotal=0,i.checkpoints=[],i.itemWidth=0,i.itemWidths=[],i.itemNodes=[],i.isToggled=!1,i.isLastReached=!1,i.state={realIndex:0,currentIndex:0,items:[],isClonesRendered:!1,rendered:!1},i}return l(e,t),d(e,null,[{key:"setStylesWithPrefixes",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2;requestAnimationFrame(function(){Object.assign(t.style,{transform:"translate3d("+e+"px, 0, 0)",transitionDuration:i+"s"})})}}]),d(e,[{key:"componentWillMount",value:function(){this.initializeItems(this.props.children)}},{key:"componentDidMount",value:function(){var t=this.props,e=t.onInit,i=t.loop;this.innerPadding=parseInt(getComputedStyle(this.innerNode).getPropertyValue("padding-left"),0)+parseInt(getComputedStyle(this.innerNode).getPropertyValue("padding-right"),0),this.initializeSlider(),window.addEventListener("orientationchange",this.handleViewportResize.bind(this)),window.addEventListener("resize",this.handleViewportResize.bind(this)),this.setState({rendered:!0}),!i&&e&&e()}},{key:"componentWillUpdate",value:function(t){this.props.currentIndex!==t.currentIndex&&this.goToSlide(t.currentIndex)}},{key:"componentDidUpdate",value:function(){function t(t){return e.apply(this,arguments)}var e=o(regeneratorRuntime.mark(function t(e){var i,n,r,o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.props,n=i.children,r=i.currentIndex,o=i.loop,s=i.onInit,n.length===e.children.length){t.next=7;break}return t.next=4,this.initializeItems(n);case 4:return t.next=6,this.calcCheckpoints();case 6:this.goToSlide(r,!0);case 7:o&&s&&s();case 8:case"end":return t.stop()}},t,this)}));return t}()},{key:"handleViewportResize",value:function(){this.calcCheckpoints(),this.goToSlide(this.state.currentIndex,!0)}},{key:"calcCheckpoints",value:function(){var t=this,e=this.props,i=e.gap,n=e.loop;this.checkpoints=[],this.itemWidths=[],this.widthTotal=0,b.default.times(n?3*this.state.itemsCount:this.state.itemsCount,function(e){var r=t.itemNodes[n?e%t.state.itemsCount:e],o=r.offsetWidth+i;t.itemWidths.push(o),t.widthTotal+=o,r&&t.checkpoints.push((r.offsetWidth+i)/2+(r.offsetWidth+i)*e)})}},{key:"initializeItems",value:function(t){var e=this;this.setState({items:t.map(function(t,i){return e.renderItem(t,i)}),itemsCount:t.length})}},{key:"initializeSlider",value:function(){var t=this.props.loop;this.calcCheckpoints(),t&&this.renderLoopItems()}},{key:"swipingLeft",value:function(t,i){e.setStylesWithPrefixes(this.innerNode,this.currentDelta-i.x,0)}},{key:"swipingRight",value:function(t,i){e.setStylesWithPrefixes(this.innerNode,this.currentDelta-i.x,0)}},{key:"swiped",value:function(t,i){var n=this,r=i.x;this.isSwiped=!0,this.isToggled=!1;var o=this.props,s=o.disableCheckpoints,a=o.loop,l=this.currentDelta-r,c=window.innerWidth-this.widthTotal-this.innerPadding;if(l>0)this.currentIndex=0,this.currentDelta=0,e.setStylesWithPrefixes(this.innerNode,0);else if(l<c)this.currentIndex=this.state.itemsCount-1,this.currentDelta=c,e.setStylesWithPrefixes(this.innerNode,c);else if(s){if(a){var u=this.widthTotal/3;Math.abs(l)>=2*u?this.currentDelta+=u:Math.abs(l)<=u&&(this.currentDelta-=u)}this.currentDelta=l,e.setStylesWithPrefixes(this.innerNode,this.currentDelta,0)}else{var h=b.default.findIndex(this.checkpoints,function(t,e){return Math.abs(l)>t&&Math.abs(l)<n.checkpoints[e+1]})+(a?0:1);this.isToggled=h!==this.state.currentIndex,this.goToSlide(h)}}},{key:"handleTransitionEnd",value:function(){var t=this.props,e=t.onSwiped,i=t.loop;if(!this.isToggled||!this.isSwiped)return!1;if(i){var n=this.itemNodes.length/3,r=this.itemNodes.length-this.state.itemsCount-1;this.state.currentIndex<n-1?this.goToSlide(r-1,!0):this.state.currentIndex>=r&&this.goToSlide(n-1,!0)}e&&e(this.currentIndex)}},{key:"handlePaginationClick",value:function(t){t.stopPropagation();var e=parseInt(t.target.dataset.idx,0);this.goToSlide(e+4)}},{key:"handleItemClick",value:function(t){var e=this.props,i=e.loop,n=e.onClick,r=i?t%this.state.itemsCount:t;n&&n(r,this.state)}},{key:"togglePrevNext",value:function(t){var e=this.props.onSwiped;this.goToSlide(t),e&&e(this.currentIndex,this.isLastReached)}},{key:"handlePrevClick",value:function(){var t=this.state.currentIndex;0!==t&&this.togglePrevNext(t-1)}},{key:"handleNextClick",value:function(){var t=this.state.currentIndex;!this.isLastReached&&this.togglePrevNext(t+1)}},{key:"goToSlide",value:function(t,i){var n=this.props,r=n.transitionDuration,o=n.loop,s=n.gap,a=this.innerNode.offsetWidth-this.widthTotal+s;if(this.currentIndex=t,!o&&this.widthTotal<window.innerWidth)this.currentDelta=0;else if(o||t!==this.state.itemsCount-1)if(o||0!==t){var l=-this.itemWidths.slice(0,o?t+1:t).reduce(function(t,e){return t+e});l<=a?(this.isLastReached=!0,this.currentDelta=a):(this.isLastReached=!1,this.currentDelta=l)}else this.currentDelta=0;else this.isLastReached=!0,this.currentDelta=a;e.setStylesWithPrefixes(this.innerNode,this.currentDelta,i?0:r),this.setState({currentIndex:t,realIndex:(t+1)%this.state.itemsCount})}},{key:"isItemActive",value:function(t){var e=this.props.loop;return!!this.state.rendered&&(e?t%(this.state.currentIndex+1)==0:this.state.currentIndex===t)}},{key:"renderItem",value:function(t,e){var i=this,n=this.props,o=n.classNames,s=n.gap,a=n.isMobile,l={};return a?l.onTouchTap=function(){return i.handleItemClick(e)}:l.onClick=function(){return i.handleItemClick(e)},y.default.createElement("div",p({key:""+e,className:(0,g.default)(o.item,r({},o.itemActive,this.isItemActive(e))),ref:function(t){return i.itemNodes[e]=t},style:{marginLeft:s}},l),y.default.createElement(t.type,t.props))}},{key:"renderLoopItems",value:function(){var t=this,e=this.props.children,i=[];b.default.times(3*this.state.itemsCount,function(n){i.push(t.renderItem(e[n%e.length],n))}),this.setState({items:i}),this.goToSlide(this.state.itemsCount-1,!0)}},{key:"renderPrevNext",value:function(){var t=this.props.classNames;return[y.default.createElement("button",{className:(0,g.default)(t.buttonPrev),style:0===this.state.currentIndex?{display:"none"}:null,onClick:this.handlePrevClick,key:"carousel-button-prev"}),y.default.createElement("button",{className:(0,g.default)(t.buttonNext),style:this.isLastReached?{display:"none"}:null,onClick:this.handleNextClick,key:"carousel-button-next"})]}},{key:"render",value:function(){var t=this,e=this.props,i=e.classNames,n=e.loop,o=this.state.items;return y.default.createElement("div",{className:(0,g.default)(i.root),ref:function(e){return t.rootNode=e}},y.default.createElement("div",{className:(0,g.default)(i.inner),ref:function(e){return t.innerNode=e},onTransitionEnd:this.handleTransitionEnd},o.map(function(e,i){return t.renderItem(e.props.children,i)})),this.props.prevNext&&this.renderPrevNext(),this.props.pagination&&y.default.createElement("div",{className:(0,g.default)(i.pagination)},this.props.children.map(function(e,o){return y.default.createElement("button",{key:e.key,"data-idx":o,className:(0,g.default)(i.paginationItem,r({},i.paginationItemActive,n?(t.state.currentIndex+1)%5===o:0===o)),onClick:t.handlePaginationClick})})))}}]),e}(f.Component),c(h.prototype,"initializeItems",[w.autobind],Object.getOwnPropertyDescriptor(h.prototype,"initializeItems"),h.prototype),c(h.prototype,"initializeSlider",[w.autobind],Object.getOwnPropertyDescriptor(h.prototype,"initializeSlider"),h.prototype),c(h.prototype,"handleTransitionEnd",[w.autobind],Object.getOwnPropertyDescriptor(h.prototype,"handleTransitionEnd"),h.prototype),c(h.prototype,"handlePaginationClick",[w.autobind],Object.getOwnPropertyDescriptor(h.prototype,"handlePaginationClick"),h.prototype),c(h.prototype,"handleItemClick",[w.autobind],Object.getOwnPropertyDescriptor(h.prototype,"handleItemClick"),h.prototype),c(h.prototype,"handlePrevClick",[w.autobind],Object.getOwnPropertyDescriptor(h.prototype,"handlePrevClick"),h.prototype),c(h.prototype,"handleNextClick",[w.autobind],Object.getOwnPropertyDescriptor(h.prototype,"handleNextClick"),h.prototype),c(h.prototype,"renderItem",[w.autobind],Object.getOwnPropertyDescriptor(h.prototype,"renderItem"),h.prototype),u=h))||u;P.defaultProps={gap:0,transitionDuration:.2,classNames:{root:"",inner:"",item:"",itemActive:"",pagination:"",paginationItem:"",paginationItemActive:"",prevNext:"",buttonNext:"",buttonPrev:""},pagination:!1,prevNext:!1,stopPropagation:!1,loop:!1,onSlideChange:function(){},onInit:function(){},onSwiped:function(){},onClick:function(){},currentIndex:-1,disableCheckpoints:!1,isMobile:!1},P.propTypes={isMobile:f.PropTypes.bool,gap:f.PropTypes.number,transitionDuration:f.PropTypes.number,classNames:f.PropTypes.shape({root:f.PropTypes.string,inner:f.PropTypes.string,item:f.PropTypes.string,itemActive:f.PropTypes.string,pagination:f.PropTypes.string,paginationItem:f.PropTypes.string,paginationItemActive:f.PropTypes.string,prevNext:f.PropTypes.string,buttonNext:f.PropTypes.string,buttonPrev:f.PropTypes.string}),loop:f.PropTypes.bool,pagination:f.PropTypes.bool,prevNext:f.PropTypes.bool,disableCheckpoints:f.PropTypes.bool,children:f.PropTypes.arrayOf(f.PropTypes.node).isRequired,onInit:f.PropTypes.func,onSwiped:f.PropTypes.func,onClick:f.PropTypes.func,currentIndex:f.PropTypes.number},e.default=P}])});